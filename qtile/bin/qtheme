#!/usr/bin/env python3

from os import path, listdir
from colors import red, yelow, green, imagenta
from cli import cli
import readline
import json
import sys
from argparse import ArgumentParser


user_path = path.expanduser('~')

def main ():
    try:
        kt = cli(user_path)
        parser = ArgumentParser()
        parser.add_argument('-ls', '--list', action='store_true', help='List available themes')
        parser.add_argument('-t', '--theme', help='Theme to set')
        parser.add_argument('-p', '--position', help='Position of the qtile bar [top/bottom]')
        parser.add_argument('-T', '--terminal', help='Position of the qtile bar [top/bottom]')
        args = parser.parse_args()
    
        if args.list:
            if args.theme or args.position:
                parser.error('The command --list does not accept addicional arguments')
            kt.menu_themes()
            return

        kt.set_qtile_theme(args.theme)
        kt.set_terminal_theme(args.terminal)
        kt.set_bar_position(args.position)

    except Exception as e:
        red(f'Unexpected error: {e}')


if __name__ == '__main__':
    main()